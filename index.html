<script>
const API_KEY = "pub_f3ea4b0324044ea09a8e61d21fb993d7";
const URL = `https://newsdata.io/api/1/news?apikey=${API_KEY}&language=en&category=top,technology,world`;

async function loadPreview() {
  const container = document.getElementById('preview') || document.getElementById('news');
  if (!container) return;

  container.innerHTML = '<p>Loading trending news...</p>';

  try {
    const res = await fetch(URL);
    const data = await res.json();

    if (!data.results || data.results.length === 0) {
      container.innerHTML = "<p>No news found right now. Please check back later.</p>";
      return;
    }

    container.innerHTML = '';
    data.results.slice(0, 8).forEach(article => {
      const img = article.image_url || "https://via.placeholder.com/800x400?text=No+Image+Available";
      const card = document.createElement('div');
      card.className = 'card';
      card.style = "background:#fff;padding:1rem;margin:1rem 0;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);";
      card.innerHTML = `
        <img src="${img}" alt="${article.title}" style="width:100%;border-radius:10px;">
        <h3 style="margin:10px 0;">${article.title}</h3>
        <p>${article.description || ''}</p>
        <a href="${article.link}" target="_blank" style="color:#007BFF;font-weight:bold;">Read more →</a>
      `;
      container.appendChild(card);
    });

  } catch (err) {
    console.error(err);
    container.innerHTML = '<p>⚠️ Unable to load news. Try again later.</p>';
  }
}

loadPreview();
</script>
